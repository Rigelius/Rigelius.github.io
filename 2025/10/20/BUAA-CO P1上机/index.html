<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>BUAA-CO P1上机 | Rigelius Blog</title><meta name="author" content="Rigelius"><meta name="copyright" content="Rigelius"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本节考查内容为 Verilog，一般是一道组合逻辑和两道时序逻辑，时序逻辑中一个是有限状态机。 课上题目 T1 异或卷积 任务描述 我们需要设计一个 Verilog 模块，模拟卷积神经网络中的卷积操作。 给定一个 \(6 \times 6\) 的输入矩阵 \(a\) 和一个 \(3 \times 3\) 的卷积核 \(b\)，计算输出一个 \(4 \times 4\) 的特征图 \(">
<meta property="og:type" content="article">
<meta property="og:title" content="BUAA-CO P1上机">
<meta property="og:url" content="https://rigelius.github.io/2025/10/20/BUAA-CO%20P1%E4%B8%8A%E6%9C%BA/index.html">
<meta property="og:site_name" content="Rigelius Blog">
<meta property="og:description" content="本节考查内容为 Verilog，一般是一道组合逻辑和两道时序逻辑，时序逻辑中一个是有限状态机。 课上题目 T1 异或卷积 任务描述 我们需要设计一个 Verilog 模块，模拟卷积神经网络中的卷积操作。 给定一个 \(6 \times 6\) 的输入矩阵 \(a\) 和一个 \(3 \times 3\) 的卷积核 \(b\)，计算输出一个 \(4 \times 4\) 的特征图 \(">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://rigelius.github.io/img/covers/cover6.jpg">
<meta property="article:published_time" content="2025-10-20T14:00:00.000Z">
<meta property="article:modified_time" content="2026-02-12T16:16:00.661Z">
<meta property="article:author" content="Rigelius">
<meta property="article:tag" content="CO">
<meta property="article:tag" content="Verilog">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://rigelius.github.io/img/covers/cover6.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "BUAA-CO P1上机",
  "url": "https://rigelius.github.io/2025/10/20/BUAA-CO%20P1%E4%B8%8A%E6%9C%BA/",
  "image": "https://rigelius.github.io/img/covers/cover6.jpg",
  "datePublished": "2025-10-20T14:00:00.000Z",
  "dateModified": "2026-02-12T16:16:00.661Z",
  "author": [
    {
      "@type": "Person",
      "name": "Rigelius",
      "url": "https://Rigelius.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://rigelius.github.io/2025/10/20/BUAA-CO%20P1%E4%B8%8A%E6%9C%BA/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=5.5.3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@7.1.0/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.12.0/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'BUAA-CO P1上机',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 8.1.1"></head><body><div class="bg-animation" id="web_bg" style="background-color: #f0f0f0;"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 目录</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/friends/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/covers/cover6.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Rigelius Blog</span></a><a class="nav-page-title" href="/"><span class="site-name">BUAA-CO P1上机</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><span class="site-page custom-search-btn"><i class="fa-fw fas fa-search"></i><span> Search</span></span></div><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 目录</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/friends/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><span class="site-page custom-theme-toggle"><i class="fa-fw fas fa-moon"></i></span></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">BUAA-CO P1上机</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-10-20T14:00:00.000Z" title="发表于 2025-10-20 22:00:00">2025-10-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2026-02-12T16:16:00.661Z" title="更新于 2026-02-13 00:16:00">2026-02-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90/">计算机组成</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>本节考查内容为
Verilog，一般是一道组合逻辑和两道时序逻辑，时序逻辑中一个是有限状态机。</p>
<h2 id="课上题目">课上题目</h2>
<h3 id="t1-异或卷积">T1 异或卷积</h3>
<h4 id="任务描述">任务描述</h4>
<p>我们需要设计一个 Verilog 模块，模拟卷积神经网络中的卷积操作。</p>
<p>给定一个 <span class="math inline">\(6 \times 6\)</span> 的输入矩阵
<span class="math inline">\(a\)</span> 和一个 <span
class="math inline">\(3 \times 3\)</span> 的卷积核 <span
class="math inline">\(b\)</span>，计算输出一个 <span
class="math inline">\(4 \times 4\)</span> 的特征图 <span
class="math inline">\(ans\)</span>。</p>
<h4 id="数据映射">数据映射</h4>
<p>输入和输出均以<strong>一维向量</strong>形式给出，需按照“行优先”原则映射为二维矩阵。</p>
<p>数据转换规则为：从低位到高位依次填入矩阵，先填满第 0 行，再填满第 1
行，以此类推。</p>
<p>矩阵第 <span class="math inline">\(i\)</span> 行、第 <span
class="math inline">\(j\)</span> 列的元素 <span
class="math inline">\(M[i][j]\)</span>（行列均从 0
开始计数）的值，等于向量 <span class="math inline">\(a\)</span> 的第
<span class="math inline">\(i \times n + j\)</span>
位。数学公式表达为：</p>
<p><span class="math display">\[M[i][j] = a_{i \times n +
j}\]</span></p>
<ul>
<li><strong>输入 <span class="math inline">\(a\)</span></strong>：位宽
36，对应 <span class="math inline">\(6 \times 6\)</span> 矩阵。</li>
<li><strong>输入 <span class="math inline">\(b\)</span></strong>：位宽
9，对应 <span class="math inline">\(3 \times 3\)</span> 卷积核。</li>
<li><strong>输出 <span class="math inline">\(ans\)</span></strong>：位宽
16，对应 <span class="math inline">\(4 \times 4\)</span> 矩阵。</li>
</ul>
<h4 id="运算逻辑">运算逻辑</h4>
<p>卷积操作是指，对于输出矩阵 <span class="math inline">\(ans\)</span>
中的每一个元素 <span class="math inline">\(ans[i][j]\)</span>（其中
<span class="math inline">\(0 \le i, j \le 3\)</span>），其值由输入矩阵
<span class="math inline">\(a\)</span> 中以 <span
class="math inline">\(a[i][j]\)</span> 为左上角的 <span
class="math inline">\(3 \times 3\)</span> 子矩阵与卷积核 <span
class="math inline">\(b\)</span> 计算得出。</p>
<p><strong>计算方法</strong>：将该 <span class="math inline">\(3 \times
3\)</span> 子矩阵与卷积核 <span class="math inline">\(b\)</span>
的对应元素逐个进行 <strong>逻辑与</strong>，然后将得到的 9 个结果进行
<strong>异或 (XOR)</strong> 运算，得到最终的 1 位结果 <span
class="math inline">\(ans[i][j]\)</span>。</p>
<p><span class="math display">\[ans[i][j] = \bigoplus_{k=0}^{2}
\bigoplus_{l=0}^{2} (a[i+k][j+l] \land b[k][l])\]</span></p>
<p>其中 <span class="math inline">\(\land\)</span> 表示与运算，<span
class="math inline">\(\bigoplus\)</span> 表示异或运算。</p>
<p>最后将二维 <span class="math inline">\(ans\)</span>
矩阵转化为一维输出信号：</p>
<p><span class="math display">\[ans_{i \times 4 + j} =
ans[i][j]\]</span></p>
<h4 id="接口列表">接口列表</h4>
<table>
<thead>
<tr>
<th><strong>端口名</strong></th>
<th><strong>位宽</strong></th>
<th><strong>方向</strong></th>
<th><strong>功能描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>a</strong></td>
<td>36</td>
<td>Input</td>
<td>输入矩阵 (<span class="math inline">\(6 \times 6\)</span>)</td>
</tr>
<tr>
<td><strong>b</strong></td>
<td>9</td>
<td>Input</td>
<td>卷积核 (<span class="math inline">\(3 \times 3\)</span>)</td>
</tr>
<tr>
<td><strong>ans</strong></td>
<td>16</td>
<td>Output</td>
<td>卷积结果 (<span class="math inline">\(4 \times 4\)</span>)</td>
</tr>
</tbody>
</table>
<h3 id="t2-音符记录器">T2 音符记录器</h3>
<h4 id="任务描述-1">任务描述</h4>
<p>设计一个 Verilog 模块，用于维护一个容量为 128
的音符存储队列，并支持存入、查询指定位置、统计特定音符数量等操作。</p>
<h4 id="存储规格">存储规格</h4>
<ul>
<li><strong>容量</strong>：128 个存储单元（索引范围 0 ~ 127）。</li>
<li><strong>位宽</strong>：每个音符为 3 位无符号整数（0 表示休止符，1-7
表示音阶）。</li>
<li><strong>初始状态</strong>：复位后，所有存储单元清零。</li>
</ul>
<h4 id="操作逻辑">操作逻辑</h4>
<p>系统在时钟上升沿工作，支持 <strong>同步复位 (reset)</strong>。</p>
<p>当 <code>reset</code> 为高电平时，清空所有存储的音符（置为
<code>3'd0</code>），并将 <code>note_out</code> 和 <code>count</code>
置零。</p>
<p>当 <code>reset</code> 为低电平时，根据 2 位操作码 <code>op</code>
执行以下功能：</p>
<ol type="1">
<li><p><strong>添加音符</strong> (op = <code>2'b00</code>)</p>
<p>所有已记录的音符位置前移 1 位，位置为 0 的音符被丢弃（<span
class="math inline">\(Reg[i] \leftarrow Reg[i+1]\)</span>），将
<code>note_in</code> 添加到位置为 127 的地方。输出保持不变。</p></li>
<li><p><strong>查询音符</strong> (op = <code>2'b01</code>)</p>
<p>将 <code>query</code> 位置的音符值输出到
<code>note_out</code>，<code>count</code> 保持不变。</p></li>
<li><p><strong>统计音符</strong> (op = <code>2'b10</code>)</p>
<p>统计当前存储的 128 个音符中，值等于 <code>query[2:0]</code>
的音符个数，结果输出到 <code>count</code>，<code>note_out</code>
保持不变。</p></li>
<li><p><strong>无操作</strong> (op = <code>2'b11</code>)</p>
<p>保持上一周期输出，不做任何修改。</p></li>
</ol>
<h4 id="接口列表-1">接口列表</h4>
<table>
<colgroup>
<col style="width: 17%" />
<col style="width: 11%" />
<col style="width: 11%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr>
<th><strong>端口名</strong></th>
<th><strong>位宽</strong></th>
<th><strong>方向</strong></th>
<th><strong>功能描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>clk</strong></td>
<td>1</td>
<td>Input</td>
<td>时钟信号</td>
</tr>
<tr>
<td><strong>reset</strong></td>
<td>1</td>
<td>Input</td>
<td><strong>同步</strong>复位信号，高电平有效</td>
</tr>
<tr>
<td><strong>note_in</strong></td>
<td>3</td>
<td>Input</td>
<td>待存入的音符值</td>
</tr>
<tr>
<td><strong>op</strong></td>
<td>2</td>
<td>Input</td>
<td>操作码</td>
</tr>
<tr>
<td><strong>query</strong></td>
<td>7</td>
<td>Input</td>
<td>查询索引 (op=01) 或 待统计音符值 (op=10)</td>
</tr>
<tr>
<td><strong>note_out</strong></td>
<td>3</td>
<td>Output</td>
<td>查询结果输出</td>
</tr>
<tr>
<td><strong>count</strong></td>
<td>8</td>
<td>Output</td>
<td>统计结果输出</td>
</tr>
</tbody>
</table>
<h3 id="t3-json-序列检验">T3 JSON 序列检验</h3>
<h4 id="任务描述-2">任务描述</h4>
<p>设计一个 <strong>Moore 型</strong>有限状态机，对串行输入的 JSON
字符流进行解析。系统需实时检测 JSON
序列的有效性，并统计其中包含的键值对数量。</p>
<h4 id="输入格式与约束">输入格式与约束</h4>
<p>输入信号 <code>char</code> 为 8 位 ASCII 码。系统将连续接收多个 JSON
序列，序列之间可能由若干空格分隔。</p>
<p><strong>JSON 结构规范</strong>：</p>
<ol type="1">
<li><strong>界定符</strong>：每个序列以左大括号 <code>{</code>
开始，以右大括号 <code>}</code> 结束。不存在嵌套的大括号。</li>
<li><strong>键值对</strong>：格式严格为
<code>"key":"value"</code>。多组键值对之间用逗号 <code>,</code>
分隔。</li>
<li><strong>字符串</strong>：由大小写字母和数字组成，不包含嵌套引号，长度
<span class="math inline">\(\le 15\)</span>。</li>
<li><strong>去重</strong>：输入流中不包含除序列间隔外的任何空白字符（如换行、内部空格等）。</li>
<li><strong>规模</strong>：一个 JSON 序列最多包含 255 组键值对。</li>
</ol>
<h4 id="判定逻辑">判定逻辑</h4>
<p><strong>有效性判定</strong>：</p>
<ul>
<li><strong>合法序列</strong>：所有键和值的字符串均<strong>不为空</strong>。</li>
<li><strong>非法序列</strong>：若出现空字符串（如 <code>"": "val"</code>
或 <code>"key": ""</code>），则该整个 JSON 序列被判定为无效。</li>
</ul>
<p><strong>输出更新机制</strong>：</p>
<p>输出信号在检测到右大括号 <code>}</code>
后的<strong>下一个时钟上升沿</strong>更新，并保持直到下一次复位或下一个
JSON 序列解析完毕。</p>
<ul>
<li><strong>cur_num</strong>（当前计数）：
<ul>
<li>若序列<strong>合法</strong>，输出该序列包含的键值对数量。</li>
<li>若序列<strong>非法</strong>（含空串），输出 <code>8'd0</code>。</li>
</ul></li>
<li><strong>max_num</strong>（历史最大值）：
<ul>
<li>记录自上次 <code>reset</code> 以来所有 <code>cur_num</code>
中的最大值。</li>
<li>每次 <code>cur_num</code> 更新时同步更新 <code>max_num</code>。</li>
</ul></li>
</ul>
<h4 id="接口列表-2">接口列表</h4>
<table>
<colgroup>
<col style="width: 14%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr>
<th><strong>端口名</strong></th>
<th><strong>位宽</strong></th>
<th><strong>方向</strong></th>
<th><strong>功能描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>clk</strong></td>
<td>1</td>
<td>Input</td>
<td>时钟信号</td>
</tr>
<tr>
<td><strong>reset</strong></td>
<td>1</td>
<td>Input</td>
<td><strong>异步</strong>复位信号，清空历史记录 (<code>max_num</code> 置
0)</td>
</tr>
<tr>
<td><strong>char</strong></td>
<td>8</td>
<td>Input</td>
<td>串行输入的字符 ASCII 码</td>
</tr>
<tr>
<td><strong>cur_num</strong></td>
<td>8</td>
<td>Output</td>
<td>当前 JSON 序列的键值对计数</td>
</tr>
<tr>
<td><strong>max_num</strong></td>
<td>8</td>
<td>Output</td>
<td>历史最大的键值对计数</td>
</tr>
</tbody>
</table>
<h4 id="注意事项">注意事项</h4>
<ul>
<li><strong>双引号判定</strong>：判断输入字符是否为双引号时，请使用
<code>char == 8'h22</code>。</li>
<li><strong>复位时机</strong>：题目保证 <code>reset</code>
信号仅会在两个 JSON 序列的间隙出现，不会打断正在输入的序列。</li>
<li><strong>空串处理</strong>：只要发现任意一个键或值为空串，<code>cur_num</code>
必须强制结算为 0，无论其他键值对是否正常。</li>
</ul>
<h2 id="题目分析">题目分析</h2>
<p>T1 直接按题干的公式来就行。T2
具体写代码时可能会遇到一系列细节问题，比如 <code>for</code>
循环里应该是要用阻塞赋值 <code>=</code>，用非阻塞赋值 <code>&lt;=</code>
的话可能出问题，有其他人也详细分析过了。这道题我当时不太敢开一个 128
个元素的数组，因此是将它们拼成一个 384
位的寄存器来模拟的，这样移位比较简单了，可以直接
&gt;&gt;3。但我一开始没看见第三种情况是 <code>query[2:0]</code> 而不是
<code>query</code>，因此调试了半天。</p>
<p>T3 看上去比较复杂，我仍然是一贯的定义状态，最终定义了 11
个状态，代码写成了史山，再配合着 <code>testbench</code>
仿真后才通过。但考完其他人说也可以不用状态机，维护几个变量就行，因此也提示我们思路还是要灵活一点，不要见到时序逻辑就用状态机。</p>
<h2 id="笔者的话">笔者的话</h2>
<p>用 Verilog 写状态机和 Logisim
很不一样，后者中一般是先根据状态转移的方法写真值表，然后将其转化成组合电路，而
Verilog 就很简单，直接将状态转移翻译成 <code>if-else</code>
或者三目运算符就行。P1 上机前一定要多看看指导书，Verilog
有很多特性可能不熟悉，比如有符号和无符号等，另外<del>ISE
中其实是有小抄的</del>，导航栏中有一个灯泡按钮，里面有很多
<code>Language Templates</code>，一些语法如果忘记了，比如
<code>for</code> 循环、函数等可以在这里现查。还有 P1 每个题都要写
<code>testbench</code>，不要因为某题简单就不写，因为最后助教会一一检查的（）</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://Rigelius.github.io">Rigelius</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://rigelius.github.io/2025/10/20/BUAA-CO%20P1%E4%B8%8A%E6%9C%BA/">https://rigelius.github.io/2025/10/20/BUAA-CO%20P1%E4%B8%8A%E6%9C%BA/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://Rigelius.github.io" target="_blank">Rigelius Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/CO/">CO</a><a class="post-meta__tags" href="/tags/Verilog/">Verilog</a></div><div class="post-share"><div class="social-share" data-image="/img/covers/cover6.jpg" data-sites="facebook,x,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.6/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/10/27/BUAA-CO%20P2%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P2上机"><img class="cover" src="/img/covers/cover10.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">BUAA-CO P2上机</div></div><div class="info-2"><div class="info-item-1">本节考查内容为 MIPS 汇编语言，三道题目一般至少两道会给参考 C 代码，考验 MIPS 代码的编写能力。 课上题目 T1 工厂选址 任务描述 假设你正在编写城市规划核心功能。需要在给定的 \(n\) 个候选坐标点 \((x, y)\) 中，筛选出一个符合特定条件的点用于建造工厂。 筛选条件：  象限限制：候选点必须位于平面直角坐标系的 第二象限 或 第四象限（不包含坐标轴）。 面积最大化：该点向两坐标轴作垂线，与原点 \((0,0)\) 所围成的矩形面积必须是所有满足条件点中最大的。  你需要编写 MIPS 汇编程序实现该逻辑，输出选定点的坐标。 判定逻辑 有效性判定： 对于输入坐标 \((x, y)\)，该点有效当且仅当满足以下二者之一：  第二象限：\(x &lt; 0\) 且 \(y &gt; 0\) 第四象限：\(x &gt; 0\) 且 \(y &lt; 0\) 注：位于第一、三象限或坐标轴上的点应直接忽略。  优化目标： 计算矩形面积 \(Area = |x| \times |y|\)。  若存在多个点的面...</div></div></div></a><a class="pagination-related" href="/2025/10/13/BUAA-CO%20P0%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P0上机"><img class="cover" src="/img/covers/cover7.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">BUAA-CO P0上机</div></div><div class="info-2"><div class="info-item-1">本节考查内容为 Logisim，一般是一道组合逻辑和两道时序逻辑，时序逻辑中一个是有限状态机。 课上题目 T1 起伏数列 任务描述 我们需要在 Logisim 中设计一个 Moore 型有限状态机，用于实时监测输入数列的波动趋势。输入 \(a\) 为 5 位无符号整数。 数列的初始值默认为 \(a_0 = 7\)。即复位后，读入的第一个数据 \(a_1\) 将与 7 进行比较。 判定逻辑 设当前输入为 \(a_{m}\)，上一周期输入为 \(a_{m-1}\)（题目保证相邻输入不相等）：  若 \(a_{m} &gt; a_{m-1}\)，记为“起”； 若 \(a_{m} &lt; a_{m-1}\)，记为“伏”。  我们需要检测的目标模式是 “起 \(\rightarrow\) 起 \(\rightarrow\) 伏 \(\rightarrow\) 起”。 状态机支持循环检测，即当前成功匹配序列的最后一个“起”，可以作为下一个序列的开头。 当且仅当最近四个周期的变化趋势严格满足“起起伏起”时，输出 output 为 1，其他情况 out...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/11/17/BUAA-CO%20P5%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P5上机"><img class="cover" src="/img/covers/cover4.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-17</div><div class="info-item-2">BUAA-CO P5上机</div></div><div class="info-2"><div class="info-item-1">本节考查内容为 Verilog 实现流水线 CPU。 课上题目 T1 ccc ccc-rs-rt-rd RTL 123456temp1 &lt;- count_leading_zeros(GPR[rs])temp2 &lt;- count_leading_ones(GPR[rt])if (temp1 &gt; temp2)    GPR[rd] &lt;- GPR[rs][31:16] || GPR[rt][15:0]else    GPR[rd] &lt;- GPR[rt][31:16] || GPR[rs][15:0] T2 cjoc cjoc-rs-rt-offset RTL 123456789ext_offset &lt;- sign_ext(offset||00)id &lt;- ext_offset[4:2]temp &lt;- GPR[rs][id + 7 : id]condition &lt;- (temp &gt; 8&#x27;d21)if (condition)    GPR[rt] &lt;- PC + 8    PC &lt;- PC ...</div></div></div></a><a class="pagination-related" href="/2025/11/10/BUAA-CO%20P4%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P4上机"><img class="cover" src="/img/covers/cover2.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-10</div><div class="info-item-2">BUAA-CO P4上机</div></div><div class="info-2"><div class="info-item-1">本节考查内容为 Verilog 实现单周期 CPU。 课上题目 T1 brc brc-rs-rt-rd RTL 12345temp &lt;- GPR[rs][4:0]if (temp &lt; 25 &amp;&amp; count_ones(GPR[rt][temp+7:temp]) % 2 == 0)    GPR[rd] &lt;- reverse(GPR[rt])else    GPR[rd] &lt;- GPR[rt] T2 cabc cabc-rs-rt-offset RTL 123456789cross1 &lt;- GPR[rs][23:16]||GPR[rt][7:0]||GPR[rs][31:24]||GPR[rt][15:8]cross2 &lt;- GPR[rt][7:0]||GPR[rs][23:16]||GPR[rt][31:24]||GPR[rs][15:8]xor_result &lt;- cross1 ^ cross2cnt1 &lt;- count_zeros(xor_result[31:16])cnt2 &lt;- cou...</div></div></div></a><a class="pagination-related" href="/2025/09/29/BUAA-CO%20Pre%E4%B8%8A%E6%9C%BA/" title="BUAA-CO Pre上机"><img class="cover" src="/img/covers/cover1.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-29</div><div class="info-item-2">BUAA-CO Pre上机</div></div><div class="info-2"><div class="info-item-1">本节主要是掌握三个工具，三道题目依次为 Logisim、Verilog、MIPS。 课上题目 T1 推箱子 任务描述 我们需要在 Logisim 中设计一个软电路来模拟简易的推箱子游戏。游戏地图构建在一个二维平面直角坐标系中，范围是 \(0 \le x, y \le 5\) 的正方形区域（共 \(6 \times 6\) 个点）。 箱子的起始位置（包括 Reset 后）固定在 \((0,0)\)，目标位置固定在 \((5,5)\)。 地图中包含 6 个固定的障碍点，分别为：\((1,1)\)、\((1,2)\)、\((2,1)\)、\((3,4)\)、\((4,3)\)、\((4,4)\)。 控制逻辑 系统输入 \((dx, dy)\) 表示箱子的移动变化量，且保证只会出现 \((0,0)\)、\((1,0)\) 或 \((0,1)\) 这三种情况。 设当前坐标为 \((x, y)\)，则预期坐标为 \((x+dx, y+dy)\)：  如果预期坐标合法（即在地图边界内且不是障碍），则在下一周期将箱子移动到该位置； 如果预期坐标非法（越界或撞...</div></div></div></a><a class="pagination-related" href="/2025/12/01/BUAA-CO%20P6%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P6上机"><img class="cover" src="/img/covers/cover14.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-01</div><div class="info-item-2">BUAA-CO P6上机</div></div><div class="info-2"><div class="info-item-1">本节考查内容为 Verilog 实现流水线 CPU。 第一次课上题目 T1 mygo mygo-rs-rt RTL 123456789101112131415161718192021222324function pattern_value(g):    return count_leading_zeros(g) * 2 + count_ones(g)function characteristic_code(A):    sum &lt;- 0    for i in 0..7:        g &lt;- A[4*i+3 : 4*i]        sum &lt;- sum + pattern_value(g) * (i + 1)    return sum    MDU_Start(Busy_Cycles = 5)temp1 &lt;- characteristic_code(GPR[rs])temp2 &lt;- characteristic_code(GPR[rt])if (temp1 &gt; temp2)    HI &lt;- GPR[rs]    LO...</div></div></div></a><a class="pagination-related" href="/2025/12/08/BUAA-CO%20P7%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P7上机"><img class="cover" src="/img/covers/cover10.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-08</div><div class="info-item-2">BUAA-CO P7上机</div></div><div class="info-2"><div class="info-item-1">本节考查内容为 Verilog 实现 MIPS 微系统，支持中断和异常。 课上题目 T1~T4 都是课下强测，分别是功能强测、异常强测、中断强测、冲突强测。 T5 monitor 在 P7 系统中（DM 范围 0x0000 ~ 0x2fff），新增一套内存监视控制机制。需在 CP0 中扩展三个专用寄存器，并增加一条专用配置指令 monitor，配合 sw 指令实现对特定内存区间的写入保护。 1. 新增 CP0 寄存器 系统复位后，以下三个寄存器均置为 0。          编号 寄存器名 功能描述 读写权限     18 DMBoundaryHI 监视区间上界 mfc0 可读；仅 monitor 可写   19 DMBoundaryLO 监视区间下界 mfc0 可读；仅 monitor 可写   20 DMEnable 监视使能控制字 mfc0 可读；仅 monitor 可写     mtc0：仅能写入原有的 12-15 号寄存器（SR, Cause, EPC, PrID ），写入...</div></div></div></a><a class="pagination-related" href="/2025/10/13/BUAA-CO%20P0%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P0上机"><img class="cover" src="/img/covers/cover7.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-10-13</div><div class="info-item-2">BUAA-CO P0上机</div></div><div class="info-2"><div class="info-item-1">本节考查内容为 Logisim，一般是一道组合逻辑和两道时序逻辑，时序逻辑中一个是有限状态机。 课上题目 T1 起伏数列 任务描述 我们需要在 Logisim 中设计一个 Moore 型有限状态机，用于实时监测输入数列的波动趋势。输入 \(a\) 为 5 位无符号整数。 数列的初始值默认为 \(a_0 = 7\)。即复位后，读入的第一个数据 \(a_1\) 将与 7 进行比较。 判定逻辑 设当前输入为 \(a_{m}\)，上一周期输入为 \(a_{m-1}\)（题目保证相邻输入不相等）：  若 \(a_{m} &gt; a_{m-1}\)，记为“起”； 若 \(a_{m} &lt; a_{m-1}\)，记为“伏”。  我们需要检测的目标模式是 “起 \(\rightarrow\) 起 \(\rightarrow\) 伏 \(\rightarrow\) 起”。 状态机支持循环检测，即当前成功匹配序列的最后一个“起”，可以作为下一个序列的开头。 当且仅当最近四个周期的变化趋势严格满足“起起伏起”时，输出 output 为 1，其他情况 out...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Rigelius</div><div class="author-info-description">A blog about technology and life.</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Rigelius"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BE%E4%B8%8A%E9%A2%98%E7%9B%AE"><span class="toc-number">1.</span> <span class="toc-text">课上题目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#t1-%E5%BC%82%E6%88%96%E5%8D%B7%E7%A7%AF"><span class="toc-number">1.1.</span> <span class="toc-text">T1 异或卷积</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1%E6%8F%8F%E8%BF%B0"><span class="toc-number">1.1.1.</span> <span class="toc-text">任务描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%98%A0%E5%B0%84"><span class="toc-number">1.1.2.</span> <span class="toc-text">数据映射</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%90%E7%AE%97%E9%80%BB%E8%BE%91"><span class="toc-number">1.1.3.</span> <span class="toc-text">运算逻辑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E5%88%97%E8%A1%A8"><span class="toc-number">1.1.4.</span> <span class="toc-text">接口列表</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#t2-%E9%9F%B3%E7%AC%A6%E8%AE%B0%E5%BD%95%E5%99%A8"><span class="toc-number">1.2.</span> <span class="toc-text">T2 音符记录器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1%E6%8F%8F%E8%BF%B0-1"><span class="toc-number">1.2.1.</span> <span class="toc-text">任务描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%A7%84%E6%A0%BC"><span class="toc-number">1.2.2.</span> <span class="toc-text">存储规格</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E9%80%BB%E8%BE%91"><span class="toc-number">1.2.3.</span> <span class="toc-text">操作逻辑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E5%88%97%E8%A1%A8-1"><span class="toc-number">1.2.4.</span> <span class="toc-text">接口列表</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#t3-json-%E5%BA%8F%E5%88%97%E6%A3%80%E9%AA%8C"><span class="toc-number">1.3.</span> <span class="toc-text">T3 JSON 序列检验</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1%E6%8F%8F%E8%BF%B0-2"><span class="toc-number">1.3.1.</span> <span class="toc-text">任务描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%A0%BC%E5%BC%8F%E4%B8%8E%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.3.2.</span> <span class="toc-text">输入格式与约束</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A4%E5%AE%9A%E9%80%BB%E8%BE%91"><span class="toc-number">1.3.3.</span> <span class="toc-text">判定逻辑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E5%88%97%E8%A1%A8-2"><span class="toc-number">1.3.4.</span> <span class="toc-text">接口列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.3.5.</span> <span class="toc-text">注意事项</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%98%E7%9B%AE%E5%88%86%E6%9E%90"><span class="toc-number">2.</span> <span class="toc-text">题目分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%94%E8%80%85%E7%9A%84%E8%AF%9D"><span class="toc-number">3.</span> <span class="toc-text">笔者的话</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/12/09/BUAA-CO%20%E6%8E%A8%E8%8D%90%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/" title="BUAA-CO 推荐题目汇总"><img src="/img/covers/cover1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-CO 推荐题目汇总"/></a><div class="content"><a class="title" href="/2025/12/09/BUAA-CO%20%E6%8E%A8%E8%8D%90%E9%A2%98%E7%9B%AE%E6%B1%87%E6%80%BB/" title="BUAA-CO 推荐题目汇总">BUAA-CO 推荐题目汇总</a><time datetime="2025-12-09T14:00:00.000Z" title="发表于 2025-12-09 22:00:00">2025-12-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/08/BUAA-CO%20P7%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P7上机"><img src="/img/covers/cover10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-CO P7上机"/></a><div class="content"><a class="title" href="/2025/12/08/BUAA-CO%20P7%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P7上机">BUAA-CO P7上机</a><time datetime="2025-12-08T14:00:00.000Z" title="发表于 2025-12-08 22:00:00">2025-12-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/01/BUAA-CO%20P6%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P6上机"><img src="/img/covers/cover14.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-CO P6上机"/></a><div class="content"><a class="title" href="/2025/12/01/BUAA-CO%20P6%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P6上机">BUAA-CO P6上机</a><time datetime="2025-12-01T14:00:00.000Z" title="发表于 2025-12-01 22:00:00">2025-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/17/BUAA-CO%20P5%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P5上机"><img src="/img/covers/cover4.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-CO P5上机"/></a><div class="content"><a class="title" href="/2025/11/17/BUAA-CO%20P5%E4%B8%8A%E6%9C%BA/" title="BUAA-CO P5上机">BUAA-CO P5上机</a><time datetime="2025-11-17T14:00:00.000Z" title="发表于 2025-11-17 22:00:00">2025-11-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/11/11/BUAA-OOpre%20%E8%AF%BE%E7%A8%8B%E6%80%BB%E7%BB%93/" title="BUAA-OOpre 课程总结"><img src="/img/covers/cover9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="BUAA-OOpre 课程总结"/></a><div class="content"><a class="title" href="/2025/11/11/BUAA-OOpre%20%E8%AF%BE%E7%A8%8B%E6%80%BB%E7%BB%93/" title="BUAA-OOpre 课程总结">BUAA-OOpre 课程总结</a><time datetime="2025-11-11T13:01:00.000Z" title="发表于 2025-11-11 21:01:00">2025-11-11</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/background.jpg);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By Rigelius</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 8.1.1</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.5.3</a></span></div></div></footer></div><div class="search-dialog" id="search-modal"><div class="search-dialog-wrapper"><div class="search-dialog-header"><h3 class="search-dialog-title">搜索</h3><button id="search-close" type="button">×</button></div><div class="search-dialog-input-wrap"><label class="search-input-label" for="search-input">关键词</label><input id="search-input" type="text" autocomplete="off"></div><div class="search-results" id="search-results"></div></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="前往评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=5.5.3"></script><script src="/js/main.js?v=5.5.3"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        loader: {
          load: [
            // Four font extension packages (optional)
            //- '[tex]/bbm',
            //- '[tex]/bboldx',
            //- '[tex]/dsfont',
            '[tex]/mhchem'
          ],
          paths: {
            'mathjax-newcm': '[mathjax]/../@mathjax/mathjax-newcm-font',

            //- // Four font extension packages (optional)
            //- 'mathjax-bbm-extension': '[mathjax]/../@mathjax/mathjax-bbm-font-extension',
            //- 'mathjax-bboldx-extension': '[mathjax]/../@mathjax/mathjax-bboldx-font-extension',
            //- 'mathjax-dsfont-extension': '[mathjax]/../@mathjax/mathjax-dsfont-font-extension',
            'mathjax-mhchem-extension': '[mathjax]/../@mathjax/mathjax-mhchem-font-extension'
          }
        },
        output: {
          font: 'mathjax-newcm',
        },
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
          packages: {
            '[+]': [
              'mhchem'
            ]
          }
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          menuOptions: {
            settings: {
              enrich: false  // Turn off Braille and voice narration text automatic generation
            }
          },
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }

      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax@4.0.0/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.pageType === 'shuoshuo'
  const option = null

  const getGiscusTheme = theme => theme === 'dark' ? 'dark' : 'light'

  const createScriptElement = config => {
    const ele = document.createElement('script')
    Object.entries(config).forEach(([key, value]) => {
      ele.setAttribute(key, value)
    })
    return ele
  }

  const loadGiscus = (el = document, key) => {
    const mappingConfig = isShuoshuo
      ? { 'data-mapping': 'specific', 'data-term': key }
      : { 'data-mapping': (option && option['data-mapping']) || 'pathname' }

    const giscusConfig = {
      src: 'https://giscus.app/client.js',
      'data-repo': 'Rigelius/Rigelius.github.io',
      'data-repo-id': 'R_kgDOQ6-aAw',
      'data-category-id': 'DIC_kwDOQ6-aA84C1ESp',
      'data-theme': getGiscusTheme(document.documentElement.getAttribute('data-theme')),
      'data-reactions-enabled': '1',
      crossorigin: 'anonymous',
      async: true,
      ...option,
      ...mappingConfig
    }

    const scriptElement = createScriptElement(giscusConfig)

    el.querySelector('#giscus-wrap').appendChild(scriptElement)

    if (isShuoshuo) {
      window.shuoshuoComment.destroyGiscus = () => {
        if (el.children.length) {
          el.innerHTML = ''
          el.classList.add('no-comment')
        }
      }
    }
  }

  const changeGiscusTheme = theme => {
    const iframe = document.querySelector('#giscus-wrap iframe')
    if (iframe) {
      const message = {
        giscus: {
          setConfig: {
            theme: getGiscusTheme(theme)
          }
        }
      }
      iframe.contentWindow.postMessage(message, 'https://giscus.app')
    }
  }

  btf.addGlobalFn('themeChange', changeGiscusTheme, 'giscus')

  if (isShuoshuo) {
    'Giscus' === 'Giscus'
      ? window.shuoshuoComment = { loadComment: loadGiscus }
      : window.loadOtherComment = loadGiscus
    return
  }

  if ('Giscus' === 'Giscus' || !false) {
    if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
    else loadGiscus()
  } else {
    window.loadOtherComment = loadGiscus
  }
})()</script></div><script src="/js/custom.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>